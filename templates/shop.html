{% extends "base.html" %}

{% block content %}
<section class="container" style="margin-top: 100px;">
    <div class="section-title">
        <h2>Ù…ØªØ¬Ø± Ø§Ù„Ù…Ù„Ø§Ø¨Ø³</h2>
    </div>

    <div style="margin-bottom: 30px; text-align: center;">
        <a href="{{ url_for('shop') }}" class="btn {% if not category %}active{% endif %}" style="margin: 5px;">Ø§Ù„ÙƒÙ„</a>
        <a href="{{ url_for('shop', category='Ø±Ø¬Ø§Ù„ÙŠ') }}" class="btn {% if category == 'Ø±Ø¬Ø§Ù„ÙŠ' %}active{% endif %}" style="margin: 5px;">Ø±Ø¬Ø§Ù„ÙŠ</a>
        <a href="{{ url_for('shop', category='Ù†Ø³Ø§Ø¦ÙŠ') }}" class="btn {% if category == 'Ù†Ø³Ø§Ø¦ÙŠ' %}active{% endif %}" style="margin: 5px;">Ù†Ø³Ø§Ø¦ÙŠ</a>
        <a href="{{ url_for('shop', category='Ø§ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª') }}" class="btn {% if category == 'Ø§ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª' %}active{% endif %}" style="margin: 5px;">Ø§ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª</a>
    </div>

    <div class="products-grid">
        {% for product in products.items %}
        <div class="product-card">
            <div class="product-image">
                <img src="{{ url_for('static', filename='uploads/' + product.image) }}" alt="{{ product.name }}">
            </div>
            <div class="product-info">
                <h3>{{ product.name }}</h3>
                <p style="color: #777; font-size: 14px; margin-bottom: 10px;">{{ product.category }}</p>
                <div class="product-price">
                    <span class="current-price">{{ product.price }} Ø¯Ø±Ù‡Ù…</span>
                    {% if product.old_price %}
                    <span class="old-price">{{ product.old_price }} Ø¯Ø±Ù‡Ù…</span>
                    {% endif %}
                </div>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <a href="{{ url_for('product_detail', product_id=product.id) }}" class="btn btn-outline">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„</a>
                    <a href="https://wa.me/212632256568?text={{ ('Ø£Ù‡Ù„Ø§Ù‹ØŒ Ø£Ø±ÙŠØ¯ Ø·Ù„Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬: ' + product.name + ' - Ø¨Ø³Ø¹Ø±: ' + product.price|string + ' Ø¯Ø±Ù‡Ù…') | urlencode }}" 
                       class="btn" 
                       style="background-color: #25D366; display: flex; align-items: center; justify-content: center; gap: 5px; padding: 8px;"
                       target="_blank">
                        <span style="font-size: 16px;">ğŸ“±</span>
                        Ø·Ù„Ø¨ Ø³Ø±ÙŠØ¹
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Ø§Ù„ØªØµÙØ­ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª -->
    <div style="display: flex; justify-content: center; margin: 40px 0;">
        {% if products.has_prev %}
            <a href="{{ url_for('shop', page=products.prev_num, category=category) }}" class="btn" style="margin: 0 5px;">Ø§Ù„Ø³Ø§Ø¨Ù‚</a>
        {% endif %}
        
        {% for page_num in products.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
            {% if page_num %}
                {% if products.page == page_num %}
                    <a href="{{ url_for('shop', page=page_num, category=category) }}" class="btn active" style="margin: 0 5px;">{{ page_num }}</a>
                {% else %}
                    <a href="{{ url_for('shop', page=page_num, category=category) }}" class="btn" style="margin: 0 5px;">{{ page_num }}</a>
                {% endif %}
            {% else %}
                <span class="btn" style="margin: 0 5px;">...</span>
            {% endif %}
        {% endfor %}
        
        {% if products.has_next %}
            <a href="{{ url_for('shop', page=products.next_num, category=category) }}" class="btn" style="margin: 0 5px;">Ø§Ù„ØªØ§Ù„ÙŠ</a>
        {% endif %}
    </div>
</section>
{% endblock %}
